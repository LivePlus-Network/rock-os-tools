{
  "permissions": {
    "allow": [
      "Bash(mkdir:*)",
      "Bash(make:*)",
      "Bash(./bin/darwin/rock-kernel:*)",
      "Bash(./bin/darwin/rock-verify:*)",
      "Bash(./bin/darwin/rock-image:*)",
      "Bash(git add:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nImplement critical rock-init integration layer for ROCK-OS tools\n\nThis commit establishes the integration contract between rock-os-tools and rock-init,\nensuring all tools follow the exact hardcoded paths required for ROCK-OS to boot.\n\nKey changes:\n- Created pkg/integration package with hardcoded paths from rock-init\n- Fixed rock-kernel to use correct ''init='' (not ''rdinit='') parameter\n- Implemented rock-verify tool for integration verification\n- Implemented rock-image tool with proper path handling\n- All paths are now centralized in pkg/integration to prevent errors\n\nCRITICAL INTEGRATION PATHS (hardcoded in rock-init):\n- rock-init MUST be renamed to /sbin/init\n- rock-manager MUST be at /usr/bin/rock-manager  \n- volcano-agent MUST be at /usr/bin/volcano-agent\n- Shell MUST be at /bin/sh (symlink to busybox)\n\nTools implemented:\n- rock-kernel: Now uses correct init=/sbin/init cmdline\n- rock-verify: Validates images meet integration requirements\n- rock-image: Creates initramfs with correct structure\n\nThis ensures ROCK-OS will boot successfully by maintaining\nthe exact file structure expected by rock-init.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(chmod:*)",
      "Bash(git commit -m \"$(cat <<''EOF''\nImplement rock-image with proper CPIO support for initramfs creation\n\nThis implements the MOST CRITICAL tool for ROCK-OS boot process.\nrock-image creates initramfs images that integrate perfectly with rock-init.\n\nKey features:\n- CPIO format support (not TAR) as required for Linux initramfs\n- Three main subcommands as requested:\n  * cpio create <rootfs-dir> - Creates initramfs from directory\n  * cpio extract <image.cpio.gz> - Extracts for inspection\n  * cpio verify <image.cpio.gz> - Verifies rock-init integration\n- Strict verification of critical paths:\n  * /sbin/init (rock-init MUST be renamed!)\n  * /usr/bin/rock-manager\n  * /usr/bin/volcano-agent  \n  * /bin/busybox and /bin/sh symlink\n- Uses system cpio command for proper newc format\n- Integration with pkg/integration for path constants\n- Comprehensive structure display based on rock-builder.yaml\n\nExample workflow:\n  # Prepare rootfs with correct structure\n  mkdir -p rootfs/{sbin,bin,usr/bin}\n  cp rock-init rootfs/sbin/init  # CRITICAL: Must rename!\n  cp rock-manager rootfs/usr/bin/\n  cp volcano-agent rootfs/usr/bin/\n  cp busybox rootfs/bin/\n  ln -s busybox rootfs/bin/sh\n\n  # Create and verify\n  rock-image cpio create rootfs\n  rock-image cpio verify initrd.cpio.gz\n\nThe tool enforces the integration contract to ensure ROCK-OS will boot.\n\nðŸ¤– Generated with [Claude Code](https://claude.com/claude-code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\nEOF\n)\")",
      "Bash(git commit:*)",
      "Bash(test-rootfs/sbin/init)",
      "Bash(touch:*)",
      "Bash(test-rootfs/bin/busybox)",
      "Bash(ln:*)",
      "Bash(./bin/darwin/rock-deps:*)",
      "Bash(./bin/darwin/rock-build:*)",
      "Bash(./bin/darwin/rock-compose:*)",
      "Bash(GOOS=linux GOARCH=amd64 go build:*)",
      "Bash(GOOS=linux GOARCH=amd64 CGO_ENABLED=1 go build:*)",
      "Bash(ROCK_OUTPUT=json ./bin/darwin/rock-deps:*)"
    ],
    "deny": [],
    "ask": []
  }
}
